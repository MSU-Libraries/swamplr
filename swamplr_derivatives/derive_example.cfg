[source]
source_options = PDF,TIF,JPG,WAV,FITS

[source.tif]
derive_options = jpeg_high,jpeg_low,jpeg,jpeg_resize_scaled,new_tif,islandora_jpg,thumbnail,preview,jp2

[derive.tif.jpeg_high]
command = convert input_file -flatten -units pixelsperinch -density 300 -resize 3000 -brightness-contrast bri_con_val   output_file

[derive.tif.jpeg_low]
command = convert input_file -flatten -units pixelsperinch -density 72 -resize 2000 -brightness-contrast bri_con_val  output_file

[derive.tif.jpeg]
command = convert input_file -flatten -brightness-contrast bri_con_val output_file

[derive.tif.jpeg_resize_scaled]
command = convert input_file -flatten -resize 50%  -brightness-contrast bri_con_val  output_file

[derive.tif.new_tif]
command = convert input_file  -brightness-contrast bri_con_val output_file

[derive.tif.islandora_jpg]
command = convert input_file -flatten -resize 600x800 -quality 75 -brightness-contrast bri_con_val  output_file

[derive.tif.thumbnail]
command = convert input_file -flatten -quality 75 -resize 200x200 -brightness-contrast bri_con_val  output_file

[derive.tif.preview]
command = convert input_file -flatten -quality 75 -resize 6500x650 -brightness-contrast bri_con_val  output_file

[derive.tif.jp2]
command = convert input_file -quiet -flatten -define numrlvls=7 -define jp2:tilewidth=1024 -define jp2:tileheight=1024 -define jp2:lazy -define jp2:rate=1 -define jp2:prg=rlcp -define jp2:ilyrrates='0.015625,0.01858,0.0221,0.025,0.03125,0.03716,0.04419,0.05,0.0625,0.075,0.088,0.1,0.125,0.15,0.18,0.21,0.25,0.3,0.35,0.4,0.5,0.6,0.7,0.84' -define jp2:mode=int -brightness-contrast bri_con_val  output_file

[derive.tif.fits]
command = /var/local/fits-1.1.1/fits.sh -i file_path -xc -o output_file || /var/local/fits-1.1.1/fits.sh -i file_path -x -o output_file

[source.pdf]
derive_options = preview,thumbnail,pdf

[derive.pdf.preview]
command = convert -quality 75 input_file -flatten -resize 650x650 -brightness-contrast bri_con_val output_file

[derive.pdf.thumbnail]
command = convert -quality 75 input_file -flatten -resize 200x200 -brightness-contrast bri_con_val output_file

[derive.pdf.pdf]
command = convert input_file -brightness-contrast bri_con_val output_file

[source.wav]
derive_options = mp3,fileduration,json,waveform

[derive.wav.mp3]
command = ffmpeg -i audio.wav audio.mp3
command = ffmpeg -i {0} -codec:a libmp3lame -b:a 320k {1}

[derive.wav.fileduration]
command = ffprobe -i {0} -show_entries format=duration -v quiet -of compact

[derive.wav.waveform]
command = audiowaveform -i {0} -o {1} --no-axis-labels --waveform-color 6E005F --background-color ffffff -e {2}  -w 200 -h 200

[derive.wav.json]
command = audiowaveform -i {0} --pixels-per-second 5 -b 8 -o {1}
