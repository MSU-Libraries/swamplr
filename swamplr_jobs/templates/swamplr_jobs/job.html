{% extends "swamplr_jobs/main.html" %}
{% load humanize %}

{% block content %}

<div class="panel panel-primary">
    <div id="job-status-heading" class="panel-heading">
        <div>Job Status</div>
        <div id="kbd"><kbd>As of {% now 'm/d/Y f a' %}</kbd></div>
    </div>
    <div id="status-container">
    <div class="job-container">
        <div id="job-details" class="panel-heading job-detail-heading">Job Details</div>
        {% for e in job.card %}
            <div class="job-details">
                <div class=details-field">{{ e.0 }}</div>
                <div class="details-data">{{ e.1 }}</div>
            </div>
        {% endfor %}
        <div class="job-details">
            <div class="details-field">Actions</div>
                <div class="details-data">
                {% for a in job.actions %}
                    <a href="{% url a.action a.args %}"><button class="btn {{ a.class }}">{{ a.label }}</button></a>
                {% endfor %}
                </div>
            </div>
        </div>
    <div class="job-container">
        <div id="job-type-details" class="panel-heading job-detail-heading">{{ job.job_type|title }} Details</div>
        {% for e in job.details %}
            <div class="job-details">
                <div class="details-field">{{ e.0 }}</div>
                <div class="details-data">{{ e.1 }}</div>
            </div>
        {% endfor %}
    </div>
    </div>
    {% if job.messages %}
    <div id="messages-heading" class="panel-heading">Messages</div> 
    <div class="table table-responsive table-condensed">
        <div class="job-row">
            <div class="job-column message-data">Time</div>
            <div class="job-column message-data">Message</div>
        </div>
        {% for m in job.messages %}
        <div class="job-row message-row">
            <div class="job-column message-data">{{ m.0 }}</div>
            <div class="job-column message-data message"><pre>{{ m.1 }}</pre></div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% if job.objects %}
    <div class="panel-heading">Objects</div> 
    <div class="table table-responsive table-condensed">
        <div class="job-row">
            <div class="job-column job-data">Path</div>
            <div class="job-column job-data">PID</div>
        </div>
        {% for o in job.objects %}
        <div class="job-row">
            <div class="job-column job-data">{{ o.0 }}</div>
            <div class="job-column job-data"><code>{{ o.1 }}</code></div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
